export const namedStoreMaps = new Map(); // Map<name, WeakMap<element, obj>>
//
export const getStoresOfElement = (map, element) => {
    const E = [...map.entries() || []];
    return new Map((E?.map?.(([n, m]) => [n, m?.get?.(element)])?.filter?.(([n, e]) => !!e) || []));
    ;
};
//
export const bindStore = (element, name, obj) => {
    let weakMap = namedStoreMaps.get(name);
    if (!weakMap) {
        weakMap = new WeakMap();
        namedStoreMaps.set(name, weakMap);
    }
    if (!weakMap.has(element)) {
        weakMap.set(element, obj);
        //if (obj?.behavior) bindBeh(new WeakRef(element), [name, obj], obj?.behavior);
    }
    return element;
};
//
export const reflectStores = (element, stores) => {
    if (!element || !stores)
        return;
    for (const [name, obj] of stores.entries()) {
        bindStore(element, name, obj);
    }
    return element;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RvcmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJTdG9yZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsSUFBSSxHQUFHLEVBQTZCLENBQUMsQ0FBQyxtQ0FBbUM7QUFFdkcsRUFBRTtBQUNGLE1BQU0sQ0FBQyxNQUFNLGtCQUFrQixHQUFHLENBQUUsR0FBZ0MsRUFBRSxPQUFZLEVBQWlCLEVBQUU7SUFDakcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxPQUFPLEVBQUUsSUFBRSxFQUFFLENBQWlCLENBQUM7SUFDakQsT0FBTyxJQUFJLEdBQUcsQ0FBVyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsRUFBRSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBRSxFQUFFLENBQVEsQ0FBQyxDQUFDO0lBQUEsQ0FBQztBQUM3RyxDQUFDLENBQUE7QUFFRCxFQUFFO0FBQ0YsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRTtJQUM1QyxJQUFJLE9BQU8sR0FBRyxjQUFjLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNYLE9BQU8sR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQ3hCLGNBQWMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLCtFQUErRTtJQUNuRixDQUFDO0lBQ0QsT0FBTyxPQUFPLENBQUM7QUFDbkIsQ0FBQyxDQUFDO0FBRUYsRUFBRTtBQUNGLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtJQUM3QyxJQUFJLENBQUMsT0FBTyxJQUFJLENBQUMsTUFBTTtRQUFFLE9BQU87SUFDaEMsS0FBSyxNQUFNLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDO1FBQ3pDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFDRCxPQUFPLE9BQU8sQ0FBQztBQUNuQixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgbmFtZWRTdG9yZU1hcHMgPSBuZXcgTWFwPHN0cmluZywgV2Vha01hcDxhbnksIGFueT4+KCk7IC8vIE1hcDxuYW1lLCBXZWFrTWFwPGVsZW1lbnQsIG9iaj4+XG5cbi8vXG5leHBvcnQgY29uc3QgZ2V0U3RvcmVzT2ZFbGVtZW50ID0gKCBtYXA6IE1hcDxhbnksIFdlYWtNYXA8YW55LCBhbnk+PiwgZWxlbWVudDogYW55KTogTWFwPGFueSwgYW55PiA9PiB7XG4gICAgY29uc3QgRSA9IFsuLi5tYXAuZW50cmllcygpfHxbXV0gYXMgW2FueSwgYW55XVtdO1xuICAgIHJldHVybiBuZXcgTWFwPGFueSwgYW55PigoRT8ubWFwPy4oKFtuLG1dKT0+W24sbT8uZ2V0Py4oZWxlbWVudCldKT8uZmlsdGVyPy4oKFtuLGVdKT0+ISFlKXx8W10pIGFzIGFueSk7O1xufVxuXG4vL1xuZXhwb3J0IGNvbnN0IGJpbmRTdG9yZSA9IChlbGVtZW50LCBuYW1lLCBvYmopID0+IHtcbiAgICBsZXQgd2Vha01hcCA9IG5hbWVkU3RvcmVNYXBzLmdldChuYW1lKTtcbiAgICBpZiAoIXdlYWtNYXApIHtcbiAgICAgICAgd2Vha01hcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIG5hbWVkU3RvcmVNYXBzLnNldChuYW1lLCB3ZWFrTWFwKTtcbiAgICB9XG4gICAgaWYgKCF3ZWFrTWFwLmhhcyhlbGVtZW50KSkge1xuICAgICAgICB3ZWFrTWFwLnNldChlbGVtZW50LCBvYmopO1xuICAgICAgICAvL2lmIChvYmo/LmJlaGF2aW9yKSBiaW5kQmVoKG5ldyBXZWFrUmVmKGVsZW1lbnQpLCBbbmFtZSwgb2JqXSwgb2JqPy5iZWhhdmlvcik7XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50O1xufTtcblxuLy9cbmV4cG9ydCBjb25zdCByZWZsZWN0U3RvcmVzID0gKGVsZW1lbnQsIHN0b3JlcykgPT4ge1xuICAgIGlmICghZWxlbWVudCB8fCAhc3RvcmVzKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBbbmFtZSwgb2JqXSBvZiBzdG9yZXMuZW50cmllcygpKSB7XG4gICAgICAgIGJpbmRTdG9yZShlbGVtZW50LCBuYW1lLCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudDtcbn07XG4iXX0=